<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./consulting.css">
  <title>Tax Consulting</title>
</head>
<body>
  <!-- Navbar -->
  <div class="navbar">
    <div class="taxgen__navbar-links_logo">
      <img src="https://github.com/SudharakaA/calculation/blob/main/assets/taxgen%20logo.png" alt="TaxGen Logo" height="50" />
    </div>
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#">Services</a></li>
      <li><a href="#">Packages</a></li>
      <li><a href="#">Contact Us</a></li>
    </ul>
    <div class="auth-buttons">
      <button class="login">Login</button>
      <button class="signup">Sign Up</button>
    </div>
  </div>

  <!-- Tax Consulting Section -->
  <div class="tax-consulting">
    <h1>Meet Our Tax Advisors</h1>

    <!-- Advisors will be dynamically inserted here -->
    <div id="advisorCards"></div>

    <!-- Pagination -->
    <div class="pagination">
      <button id="prevBtn" onclick="changePage(-1)">Previous</button>
      <button id="nextBtn" onclick="changePage(1)">Next</button>
    </div>
  </div>

  <!-- Popup Form -->
  <div class="popup-overlay" id="popupOverlay"></div>
  <div class="popup-form" id="popupForm">
    <h2>Advisor Details</h2>
    <p id="advisorName"></p>
    <p id="advisorPosition"></p>
    <p id="advisorExperience"></p>
    <p id="advisorQualifications"></p>
    <button type="button" onclick="closeForm()">Close</button>
  </div>

  <!-- Footer -->
  <footer>
    <p>TaxGen is an innovative tax management solution. All rights reserved Â© 2024</p>
    <a href="#">Privacy Policy</a>
  </footer>

  <script>
    let currentPage = 1;
    let advisors = [];
    let totalPages = 0;

    // Function to render advisor cards dynamically
    function renderAdvisors() {
      const advisorCardsContainer = document.getElementById('advisorCards');
      advisorCardsContainer.innerHTML = '';  // Clear existing content

      // Loop through the advisors data and create cards
      advisors.forEach(advisor => {
        const card = document.createElement('div');
        card.classList.add('advisor-profile');
        card.innerHTML = `
          <img src="${advisor.image_url || 'https://via.placeholder.com/100'}" alt="${advisor.name}" />
          <div>
            <h3>${advisor.name}</h3>
            <p>${advisor.position}</p>
            <p>Experience: ${advisor.experience}</p>
            <p>Qualifications: ${advisor.qualifications}</p>
          </div>
          <button onclick="openForm('${advisor.name}', '${advisor.position}', '${advisor.experience}', '${advisor.qualifications}')">Contact</button>
        `;
        advisorCardsContainer.appendChild(card);
      });

      // Update the pagination buttons
      document.getElementById('prevBtn').disabled = currentPage === 1;
      document.getElementById('nextBtn').disabled = currentPage === totalPages;
    }

    // Function to handle page change (Previous / Next)
    function changePage(direction) {
      currentPage += direction;
      fetchAdvisors();
    }

    // Fetch advisors data for the current page
    function fetchAdvisors() {
      fetch('fetch_advisors.php?page=' + currentPage)
        .then(response => response.json())
        .then(data => {
          advisors = data.advisors;
          totalPages = data.totalPages;
          renderAdvisors();
        })
        .catch(error => {
          console.error('Error fetching data:', error);
        });
    }

    // Open the contact form
    function openForm(name, position, experience, qualifications) {
      document.getElementById('advisorName').innerText = 'Name: ' + name;
      document.getElementById('advisorPosition').innerText = 'Position: ' + position;
      document.getElementById('advisorExperience').innerText = 'Experience: ' + experience;
      document.getElementById('advisorQualifications').innerText = 'Qualifications: ' + qualifications;
      document.getElementById('popupOverlay').style.display = 'block';
      document.getElementById('popupForm').style.display = 'block';
    }

    // Close the contact form
    function closeForm() {
      document.getElementById('popupOverlay').style.display = 'none';
      document.getElementById('popupForm').style.display = 'none';
    }

    // Initial render
    fetchAdvisors();
  </script>
</body>
</html>
